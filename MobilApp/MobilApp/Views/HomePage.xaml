<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:local="clr-namespace:MobilApp.ViewModels" 
             xmlns:controls="clr-namespace:MobilApp.Controls"
             xmlns:fa="clr-namespace:FontAwesome"
             x:Class="MobilApp.Views.HomePage"
             Title="{Binding Title}">


    <RefreshView x:DataType="local:HomeViewModel" Command="{Binding LoadMeasurementsCommand}" IsRefreshing="{Binding IsBusy, Mode=TwoWay}">

        <ScrollView>
            <StackLayout Padding="4,5,4,20" Spacing="50">
                <controls:OfflineIndicator x:DataType="local:BaseViewModel" IsVisible="{Binding IsConnected}" />

                <Frame BackgroundColor="#0b0b44" Padding="25" Margin="10" CornerRadius="15" HasShadow="True" OutlineColor="DarkGray">
                    <StackLayout>
                        <StackLayout Orientation="Horizontal">
                            <StackLayout Padding="10" Spacing="40">

                                <StackLayout>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <Label Grid.ColumnSpan="2" 
                                               FontSize="50" 
                                               FontFamily="FA-solid" 
                                               Text="{Static fa:IconFont.TemperatureHigh}" 
                                               TextColor="White" />

                                        <Label Grid.Column="1" 
                                               Grid.Row="0" 
                                               Text="Temperature:" 
                                               FontSize="25" 
                                               FontAttributes="Bold"
                                               HorizontalOptions="StartAndExpand"
                                               TextColor="LightGray"/>
                                        
                                        <Label Grid.Column="1" Grid.Row="1" 
                                               Text="{Binding THMeasurement.Temperature, StringFormat='{0} &#176;C'}"
                                               FontAttributes="Bold"
                                               LineBreakMode="NoWrap"
                                               FontSize="30"
                                               TextColor='White'/>
                                    </Grid>
                                </StackLayout>

                                <StackLayout>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <Label Grid.ColumnSpan="2" 
                                               FontSize="50" 
                                               FontFamily="FA-solid" 
                                               Text="{Static fa:IconFont.Water}" 
                                               TextColor="White"
                                               VerticalOptions="CenterAndExpand" />

                                        <Label Grid.Column="1" 
                                               Grid.Row="0" 
                                               Text="Humidity:" 
                                               FontSize="25" 
                                               FontAttributes="Bold"
                                               HorizontalOptions="StartAndExpand"
                                               TextColor="LightGray"/>
                                        
                                        <Label Grid.Column="1" 
                                               Grid.Row="1"
                                               Text="{Binding THMeasurement.Humidity, StringFormat='{0} %'}"
                                               FontAttributes="Bold"
                                               LineBreakMode="NoWrap"
                                               FontSize="30"
                                               TextColor='White'/>
                                    </Grid>
                                </StackLayout>

                                <StackLayout Orientation="Horizontal">
                                    <Label Text="Created at:" 
                                           FontSize="19" 
                                           FontAttributes="Bold"
                                           TextColor="LightGray"/>
                                    
                                    <Label Text="{Binding THMeasurement.UpdatedMeasurementTime}"
                                           LineBreakMode="NoWrap"
                                           FontSize="19"
                                           TextColor='White'/>
                                </StackLayout>

                            </StackLayout>
                        </StackLayout>
                    </StackLayout>
                </Frame>
                
            </StackLayout>
        </ScrollView>
    </RefreshView>
</ContentPage>